int scale = 5;
int base = 24;
int amount = 30;

void settings() {
  size(base * scale * ceil(sqrt(amount)), base * scale * floor(sqrt(amount)));
}

void setup() {
  background(#FFFDDF);
  for(int y = 0; y < ceil(sqrt(amount)); y++) {
    for(int x = 0; x < ceil(sqrt(amount)); x++) {
      pushMatrix();
      translate(base * scale * (x), base * scale * (y));
      drawSkin();
      drawHead();
      drawEyes();
      if (flipCoin()) {
        drawGlasses();
      }
      drawHat();
      drawMouth();
      popMatrix();
    }
  }

  String filename = String.format("image-amount-%s--scale-%s--%s.jpg", amount, scale, int(random(0,100)));
  // save(filename);
}

boolean flipCoin() {
  float n = random(0,1);
  if (n > .5) return true;
  return false; 
}

void drawArray(String item, color[] c) {
   int count = 0;
   String[] _arr = item.split("");
   int heit = _arr.length / 24;
   for(var y = 0; y < heit; y++) {
     for(var x = 0; x < 24; x++) {
       if (!_arr[count].equals(".")) {
         fill(c[ int(_arr[count]) ]);
         noStroke();
         rect(x*scale, y*scale,scale,scale);
       }
      count = count + 1;
     }
   }
}

// COLORS
color black = #000000;
color gray = #808080;
color gray2 = #949494;
color purple = #690B45;
color purple2 = #8B0E5A;
color pink = #AD2160;
color red = #FF0000;
color green = #9AB984;
color brightGreen = #66FF00;
color blue = #2e536f;
color skinTone = #D4AB7C;
color skinTone2 = #8d5524;
color skinTone3 = #c68642;
color skinTone4 = #e0ac69;
color skinTone5 = #f1c27d;
color skinTone6 = #ffdbac;

void drawEyes() {
  String eyes = 
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    ".........22...22........" +
    ".........01...01........" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................";

   drawArray(eyes, new color[] { blue, #DAE8FF, skinTone3 });
}

void drawHead() {
  String head = 
    "........................" +
    "........................" +
    "........................" +
    "........+++++++........." +
    ".......+.......+........" +
    "......+.........+......." +
    "......+.........+......." +
    "......+.........+......." +
    "......+.........+......." +
    "......+.........+......." +
    ".....+..........+......." +
    ".....+..........+......." +
    "......+.........+......." +
    "......+.........+......." +
    "......+.........+......." +
    "......+.........+......." +
    "......+.........+......." +
    "......+.........+......." +
    "......+.+......+........" +
    "......+..++++++........." +
    "......+...+............." +
    "......+...+............." +
    "......+...+............." +
    "........................";

   drawArray(head, new color[] { black });
}

void drawHat() {
  String hat = 
    "........................" +
    "........0000000........." +
    ".......000000000........" +
    "......00000000000......." +
    ".....0101010101010......" +
    "....000000000000000....." +
    "........................" +
    "........................";

  String hat2 = 
    "........................" +
    "........................" +
    ".......000000000........" +
    "......02222222220......." +
    "......02222222220......." +
    "......02222222220......." +
    "......0222222222222222.." +
    "........................";

  String hair1 = 
    "........................" +
    "............2..........." +
    "..........222..........." +
    "...........22..........." +
    "............2...........";

  String hair2 = 
    "........................" +
    "..........222..........." +
    ".........22222.........." +
    "........2222222........." +
    "..........2222..........";

  String noHair = "";
  String[] hats = { hat, hair1, hair2, noHair, hat2 };
  color[] hairColor = new color[] { pink, brightGreen, purple, red, brightGreen };
  color hair = hairColor[int(random( hairColor.length ))];

  color[] hatColors = new color[] { pink, brightGreen, purple, red, brightGreen };
  color[] accentColors = new color[] { pink, brightGreen, purple, red, brightGreen };
  color hatColor = hatColors[int(random( hatColors.length ))];
  color accentColor = accentColors[int(random( accentColors.length ))];

  drawArray(hats[ int(random( hats.length )) ] , new color[] { black, gray2, hair});
}

void drawSkin() {
  String skin = 
    "........................" +
    "........................" +
    "........................" +
    "........0000000........." +
    ".......000000000........" +
    "......00000000000......." +
    "......00000000000......." +
    "......00000000000......." +
    "......00000000000......." +
    "......00000000000......." +
    ".....000000000000......." +
    ".....000000000000......." +
    "......00000000000......." +
    "......00000000000......." +
    "......00000000000......." +
    "......00000000000......." +
    "......00000000000......." +
    "......00000000000......." +
    "......0000000000........" +
    "......000000000........." +
    "......00000............." +
    "......00000............." +
    "......00000............." +
    "........................";
    
    color[] skinColors = { green, skinTone, skinTone2, skinTone3, skinTone4, skinTone5, skinTone6 };
    drawArray(skin, new color[] { skinColors[ int(random(skinColors.length)) ] });

}

void drawMouth() {
  String mouth = 
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "............2..........." +
  "........................" +
  "........................" +
  "...........00..........." +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................";

  String beard = 
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "............2..........." +
  ".......11..............." +
  ".......111111111........" +
  ".......111100111........" +
  ".......111111111........" +
  "........1111111........." +
  "........................" +
  "........................" +
  "........................" +
  "........................" +
  "........................";

  String[] mouths = { mouth, beard };
  color[] beardColors = { skinTone, skinTone2, skinTone3, skinTone4, skinTone5, skinTone6 }; 
  drawArray(mouths[ int(random(mouths.length))], new color[] { red, beardColors[ int(random(beardColors.length)) ], black });
}

void drawGlasses() {
  String glasses = 
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    ".......00000.00000......" +
    ".......01110001110......" +
    ".......02220.02220......" +
    ".......03330.03330......" +
    "........000...000......." +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................";
    
    String glasses2 = 
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "......00000000000......." +
    ".........000.000........" +
    ".........000.000........" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................" +
    "........................";
    

  String[] glArray = { glasses, glasses2 };
  drawArray(glArray[ int(random(glArray.length)) ], new color[] { black, purple, purple2, pink });
}
